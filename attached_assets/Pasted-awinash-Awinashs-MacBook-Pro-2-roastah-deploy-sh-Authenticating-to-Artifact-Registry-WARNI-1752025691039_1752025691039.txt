awinash@Awinashs-MacBook-Pro-2 roastah % ./deploy.sh
🔧 Authenticating to Artifact Registry...
WARNING: Your config file at [/Users/awinash/.docker/config.json] contains these credential helper entries:

{
  "credHelpers": {
    "asia.gcr.io": "gcloud",
    "eu.gcr.io": "gcloud",
    "gcr.io": "gcloud",
    "marketplace.gcr.io": "gcloud",
    "staging-k8s.gcr.io": "gcloud",
    "us-central1-docker.pkg.dev": "gcloud",
    "us-east4-docker.pkg.dev": "gcloud",
    "us.gcr.io": "gcloud"
  }
}
Adding credentials for: us-central1-docker.pkg.dev
gcloud credential helpers already registered correctly.
🏗️ Building Docker image...
[+] Building 34.2s (29/29) FINISHED                              docker:desktop-linux
 => [internal] load build definition from Dockerfile                             0.0s
 => => transferring dockerfile: 2.54kB                                           0.0s
 => WARN: FromPlatformFlagConstDisallowed: FROM --platform flag should not use   0.0s
 => WARN: FromPlatformFlagConstDisallowed: FROM --platform flag should not use   0.0s
 => [internal] load metadata for docker.io/library/node:18-alpine                0.8s
 => [auth] library/node:pull token for registry-1.docker.io                      0.0s
 => [internal] load .dockerignore                                                0.0s
 => => transferring context: 2.23kB                                              0.0s
 => [base 1/6] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3e  0.0s
 => [internal] load build context                                                0.0s
 => => transferring context: 25.64kB                                             0.0s
 => CACHED [base 2/6] RUN apk add --no-cache     python3     make     g++     g  0.0s
 => CACHED [base 3/6] WORKDIR /app                                               0.0s
 => CACHED [base 4/6] COPY package*.json ./                                      0.0s
 => CACHED [base 5/6] COPY pnpm-lock.yaml* ./                                    0.0s
 => CACHED [base 6/6] RUN npm install -g pnpm                                    0.0s
 => [backend-builder 1/3] COPY . .                                               0.1s
 => [backend-builder 2/3] RUN pnpm install --frozen-lockfile                    18.4s
 => [frontend-builder 3/3] RUN pnpm run build:client                            13.2s 
 => [backend-builder 3/3] RUN pnpm run build:server                              1.6s 
 => CACHED [production  2/14] RUN apk add --no-cache     dumb-init     && rm -r  0.0s 
 => CACHED [production  3/14] RUN addgroup -g 1001 -S nodejs                     0.0s 
 => CACHED [production  4/14] RUN adduser -S roastah -u 1001                     0.0s 
 => CACHED [production  5/14] WORKDIR /app                                       0.0s 
 => CACHED [production  6/14] COPY package*.json ./                              0.0s 
 => CACHED [production  7/14] COPY pnpm-lock.yaml* ./                            0.0s 
 => CACHED [production  8/14] RUN npm install -g pnpm &&     pnpm install --pro  0.0s 
 => [production  9/14] COPY --from=frontend-builder --chown=roastah:nodejs /app  0.0s 
 => [production 10/14] COPY --from=backend-builder --chown=roastah:nodejs /app/  0.0s
 => [production 11/14] COPY --chown=roastah:nodejs docker-entrypoint.sh ./       0.0s
 => [production 12/14] COPY --chown=roastah:nodejs drizzle.config.ts ./          0.0s
 => [production 13/14] COPY --chown=roastah:nodejs migrations ./migrations       0.0s
 => [production 14/14] RUN mkdir -p uploads && chown roastah:nodejs uploads &&   0.2s
 => exporting to image                                                           0.0s
 => => exporting layers                                                          0.0s
 => => writing image sha256:8cb8e57f7e299cd4fe5b20540e7c4e1c2ae70bb90dda3cd219b  0.0s
 => => naming to us-central1-docker.pkg.dev/roastah-d/roastah-d/roastah-d:lates  0.0s

 2 warnings found (use docker --debug to expand):
 - FromPlatformFlagConstDisallowed: FROM --platform flag should not use constant value "linux/amd64" (line 5)
 - FromPlatformFlagConstDisallowed: FROM --platform flag should not use constant value "linux/amd64" (line 57)

What's next:
    View a summary of image vulnerabilities and recommendations → docker scout quickview 
📤 Pushing Docker image...
awinash@Awinashs-MacBook-Pro-2 roastah % 