awinash@Awinashs-MacBook-Pro-2 roastah % ./deploy.sh
ðŸ”§ Authenticating to Artifact Registry...
WARNING: Your config file at [/Users/awinash/.docker/config.json] contains these credential helper entries:

{
  "credHelpers": {
    "asia.gcr.io": "gcloud",
    "eu.gcr.io": "gcloud",
    "gcr.io": "gcloud",
    "marketplace.gcr.io": "gcloud",
    "staging-k8s.gcr.io": "gcloud",
    "us-central1-docker.pkg.dev": "gcloud",
    "us-east4-docker.pkg.dev": "gcloud",
    "us.gcr.io": "gcloud"
  }
}
Adding credentials for: us-central1-docker.pkg.dev
gcloud credential helpers already registered correctly.
ðŸ—ï¸ Building Docker image...
[+] Building 23.9s (15/28)                                       docker:desktop-linux
 => [internal] load build definition from Dockerfile                             0.0s
 => => transferring dockerfile: 2.54kB                                           0.0s
 => WARN: FromPlatformFlagConstDisallowed: FROM --platform flag should not use   0.0s
 => WARN: FromPlatformFlagConstDisallowed: FROM --platform flag should not use   0.0s
 => [internal] load metadata for docker.io/library/node:18-alpine                0.8s
 => [auth] library/node:pull token for registry-1.docker.io                      0.0s
 => [internal] load .dockerignore                                                0.0s
 => => transferring context: 2.23kB                                              0.0s
 => [base 1/6] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3e  0.0s
 => [internal] load build context                                                0.0s
 => => transferring context: 53.30kB                                             0.0s
 => CACHED [base 2/6] RUN apk add --no-cache     python3     make     g++     g  0.0s
 => CACHED [base 3/6] WORKDIR /app                                               0.0s
 => CACHED [base 4/6] COPY package*.json ./                                      0.0s
 => CACHED [base 5/6] COPY pnpm-lock.yaml* ./                                    0.0s
 => CACHED [base 6/6] RUN npm install -g pnpm                                    0.0s
 => [backend-builder 1/3] COPY . .                                               0.0s
 => [backend-builder 2/3] RUN pnpm install --frozen-lockfile                    18.5s
 => ERROR [frontend-builder 3/3] RUN pnpm run build:client                       4.4s 
 => [backend-builder 3/3] RUN pnpm run build:server                              1.8s
------
 > [frontend-builder 3/3] RUN pnpm run build:client:
1.188 
1.188 > rest-express@1.0.0 build:client /app
1.188 > vite build
1.188 
2.164 vite v5.4.19 building for production...
2.300 transforming...
4.334 âœ“ 23 modules transformed.
4.336 x Build failed in 2.12s
4.336 error during build:
4.336 [vite:esbuild] Transform failed with 5 errors:
4.336 /app/client/src/pages/auth-page.tsx:260:20: ERROR: Unexpected closing fragment tag does not match opening "CardContent" tag
4.336 /app/client/src/pages/auth-page.tsx:274:17: ERROR: The character "}" is not valid inside a JSX element
4.336 /app/client/src/pages/auth-page.tsx:279:16: ERROR: Unexpected closing "CardContent" tag does not match opening "Card" tag
4.336 /app/client/src/pages/auth-page.tsx:280:14: ERROR: Unexpected closing "Card" tag does not match opening "div" tag
4.336 /app/client/src/pages/auth-page.tsx:350:10: ERROR: Unterminated regular expression
4.336 file: /app/client/src/pages/auth-page.tsx:260:20
4.336 
4.336 Unexpected closing fragment tag does not match opening "CardContent" tag
4.336 258|                        GitHub
4.336 259|                      </Button>
4.336 260|                    </>
4.336    |                      ^
4.336 261|                  ) : (
4.336 262|                    // Development environment - redirect to dev login
4.336 
4.336 The character "}" is not valid inside a JSX element
4.336 272|                      </Button>
4.336 273|                    </div>
4.336 274|                  )}
4.336    |                   ^
4.336 275|  
4.336 276|                  <div className="text-xs text-center text-muted-foreground pt-4">
4.336 
4.336 Unexpected closing "CardContent" tag does not match opening "Card" tag
4.336 277|                    By signing in, you agree to our Terms of Service and Privacy Policy
4.336 278|                  </div>
4.336 279|                </CardContent>
4.336    |                  ^
4.336 280|              </Card>
4.336 281|            </div>
4.336 
4.336 Unexpected closing "Card" tag does not match opening "div" tag
4.336 278|                  </div>
4.336 279|                </CardContent>
4.336 280|              </Card>
4.336    |                ^
4.336 281|            </div>
4.336 282|  
4.336 
4.336 Unterminated regular expression
4.336 348|          </div>
4.336 349|        </div>
4.336 350|      </div>
4.336    |            ^
4.336 351|    );
4.336 352|  }
4.336 
4.336     at failureErrorWithLog (/app/node_modules/.pnpm/esbuild@0.21.5/node_modules/esbuild/lib/main.js:1472:15)
4.336     at /app/node_modules/.pnpm/esbuild@0.21.5/node_modules/esbuild/lib/main.js:755:50
4.336     at responseCallbacks.<computed> (/app/node_modules/.pnpm/esbuild@0.21.5/node_modules/esbuild/lib/main.js:622:9)
4.336     at handleIncomingPacket (/app/node_modules/.pnpm/esbuild@0.21.5/node_modules/esbuild/lib/main.js:677:12)
4.336     at Socket.readFromStdout (/app/node_modules/.pnpm/esbuild@0.21.5/node_modules/esbuild/lib/main.js:600:7)
4.336     at Socket.emit (node:events:517:28)
4.336     at addChunk (node:internal/streams/readable:368:12)
4.336     at readableAddChunk (node:internal/streams/readable:341:9)
4.336     at Readable.push (node:internal/streams/readable:278:10)
4.336     at Pipe.onStreamRead (node:internal/stream_base_commons:190:23)
4.396 â€‰ELIFECYCLEâ€‰ Command failed with exit code 1.
------

 2 warnings found (use docker --debug to expand):
 - FromPlatformFlagConstDisallowed: FROM --platform flag should not use constant value "linux/amd64" (line 5)
 - FromPlatformFlagConstDisallowed: FROM --platform flag should not use constant value "linux/amd64" (line 57)
Dockerfile:42
--------------------
  40 |     
  41 |     # Build frontend
  42 | >>> RUN pnpm run build:client
  43 |     
  44 |     # Stage 4: Backend build
--------------------
ERROR: failed to solve: process "/bin/sh -c pnpm run build:client" did not complete successfully: exit code: 1
awinash@Awinashs-MacBook-Pro-2 roastah % 